\chapter{Анализ существующих методов парсинга данных в
области документооборота}
\label{chapter1}

В настоящей главе представлены результаты изучения суще-
ствующих методов парсинга данных в области документооборота: парсинг PDF-документов,
открытых и закрытых API, способов организации семантического описания предметной об-
ласти, технологий разработки веб-приложений и их сравнительный анализ применительно
к задаче построения системы валидации научных публикаций по официальному перечню
рецензируемых научных изданий Российской Федерации.

\section{Общий анализ проблематики \dots}

\begin{annotation}
	Раздел посвящён исследованию и сравнительному анализу методов концепту-
	ализации предметной области, применимых при проектировании системы валидации на-
	учных публикаций. Рассмотрены традиционные и современные подходы к моделированию
	семантических связей между сущностями (ER-диаграммы, UML, OWL-онтологии, плоские
	таблицы). Проведено их сравнение по критериям применимости, гибкости, сложности ре-
	ализации и способности отражать временные аспекты данных. Выделены преимущества
	комбинированного подхода, основанного на использовании ER-модели для концептуального
	описания структуры базы данных и UML-диаграмм для отображения семантических и по-
	веденческих связей. Сформулирована трёхуровневая концептуальная модель данных, обес-
	печивающая поддержку версионности перечней и семантических связей между сущностя-
	ми «Журнал», «Специальность» и «Версия перечня».
\end{annotation}




\subsection{Актуальность выбора модели концептуализации}

Выбор адекватной модели концептуализации предметной области
является критическиважным этапом проектирования информационной системы.
Для задачи валидации научныхпубликаций необходимо выбрать подход, который:

\begin{itemize}
	\item обеспечивает эффективное хранение исторических версий перечня ВАК;
	\item поддерживает 
	семантические 
	связи между 
	журналами, 
	специальностями и датами включения/исключения;
	\item позволяет отвечать на запросы типа «Был ли журнал X в перечне на дату Y?»;
	\item обладает достаточной гибкостью для обработки аномалий в данных;
	\item интегрируется с современными системами управления базами данных;
	\item поддается расширению при изменении требований.
\end{itemize}


\subsection{Методы описания концептуальной модели}

Для организации извлечённых данных необходимо выбрать модель,
которая позволит эффективно хранить исторические версии перечня 
и поддерживать семантические связи между журналами, 
специальностями и датами (см. табл. \ref{tab:conceptual-model-methods}).

\begin{table}[h]
	\caption{Сравнение методов концептуализации предметной области}
	\label{tab:conceptual-model-methods}
	\centering
	\begin{tabular}{|p{0.19\textwidth}|p{0.23\textwidth}|p{0.23\textwidth}|p{0.23\textwidth}|}
		\hline
		Метод & Описание & Преимущества & Недостатки \\
		\hline
		ER-диаграмма & 
		Сущности и связи(классический подход) 
		& Простая реализация,
		хорошо поддерживается SQL БД,
		хорошо поддерживается ORM
		& Не отражает временные аспекты \\
		\hline
		UML-диаграмма 
		& Классы, ассоциации, композиции, агрегация
		& Гибкость, поддержка наследования
		& Избыточна для простых случаев \\
		\hline
		OWL-онтология & Граф знаний, семантика 
		& Расширяемость, логический вывод 
		& Сложность реализации
		\\
		\hline
		Плоская таблица 
		& Денормализованная структура 
		& Простота, быстрый поиск 
		& Избыточность данных, аномалии \\
		\hline 
	\end{tabular}
\end{table}

\subsection{Выбор метода концептуализации}
На основе проведенного анализа для системы валидации выбран \textbf{комбинированный подход}:

\begin{compactenum}
	\item \textbf{ER-диаграммы} используются для построения концептуальной модели базы данных с
	расширением для отслеживания версий перечня и временных интервалов включения
	журналов;
	\item \textbf{UML-диаграммы} применяются для построения семантических связей между моделями данных,
	включая диаграммы классов, сценариев и деятельности, описывающими
	бизнес-процессы и взаимодействие пользователя с системой.
\end{compactenum}

\subsection*{Трехуровневая концептуальная модель}

Трехуровневая концептуальная модель данных обеспечивает поддержку версионности
перечней и семантических связей между сущностями «Журнал», «Специальность» и «Версия перечня»:

\begin{compactenum}
	\item \textbf{Слой версий перечня:} Сущность {\small\texttt{JournalListVersion}} хранит информацию 
	о каждой загруженной версии перечня с указанием даты «по состоянию на» и временной метки
	загрузки;
	\item \textbf{Слой журналов и специальностей:} Сущность {\small\texttt{Journal}} и {\small\texttt{ScientificSpecialty}} 
	содержат базовые данные о журналах (ISSN, название, издатель, страна) и специальностях 
	(код, категория, наименование);
	\item \textbf{Слой связей:} Сущность {\small\texttt{JournalListing}} связывает версию перечня, журнал и 
	диапазон дат включения/исключения, позволяя отслеживать статус журнала на конкретную дату;
\end{compactenum}

Такая архитектура позволяет ответить на ключевой вопрос: «Был ли журнал {\small\texttt{Journal}}
с ISSN {\small\texttt{Journal.issn}} = «X» включён в перечень ВАК на дату «Y»?» путём запроса к
таблице {\small\texttt{JournalListing}} с условием:

\begin{minted}[frame=lines, framesep=6pt]{sql}
/* Абстрактный запрос на получение 
статуса журнала на конкретную дату Y */
SELECT * FROM journal_listings
WHERE version_id IN (
    SELECT id FROM journal_list_versions
    WHERE valid_date <= Y
    AND journal_id = (
        SELECT id FROM journals WHERE issn = 'X'
    )
AND date_included <= Y
AND (date_excluded IS NULL OR date_excluded > Y)
)
\end{minted}

\subsection*{Дополнительные семантические ограничения}

Модель включает следующие семантические ограничения целостности:
\begin{itemize} 
	\item \textbf{Временная согласованность:} {\small\texttt{date\_included}} всегда предшествует {\small\texttt{date\_excluded}};
	\item \textbf{Уникальность версий:} на каждую дату может быть загружена только одна версия перечня;
	\item \textbf{Невозможность перекрытия:} для одного журнала в одной версии не допускается наличие пересекающихся временных интервалов включения или исключения;
	\item \textbf{Ссылочная целостность:} все ссылки на журналы и специальности должны указывать на существующие записи в соответствующих таблицах;
\end{itemize}

\subsection*{Выводы по разделу}

Проведённый анализ методов концептуализации показал, что ER-модель в сочетании с
UML-диаграммами представляет оптимальное решение для задачи проектирования системы
валидации. Такой комбинированный подход обеспечивает:

\begin{itemize}
	\item \textbf{Простоту реализации} благодаря прямому соответствию ER-модели с реляционной схемой БД;
	\item \textbf{Гибкость в представлении} сложных семантических отношений через UML-диаграммы;
	\item \textbf{Поддержку версионности} через трёхуровневую архитектуру с явным отслеживанием временных интервалов;
	\item \textbf{Масштабируемость} за счёт применения нормализации и минимизации избыточности.
\end{itemize}

Разработанная концептуальная модель служит основой для детального проектирования
архитектуры базы данных и определяет интеграционные точки между различными компо-
нентами системы.

\section{Изучение и сравнительный анализ возможностей семантического опи-
сания процессов в предметной области для задачи сценариев выполне-
ния задач}

\begin{annotation}
	Раздел посвящён исследованию методологических подходов к семантическому 
	описанию бизнес-процессов валидации научных публикаций. Рассмотрены традиционные
	и современные методы формализации процессов: IDEF0, UML Activity Diagrams, BPMN, а
	также текстовое описание. Проведено их сравнение по критериям наглядности, форма-
	лизма, применимости и практической ценности для данной предметной области. Выделены
	преимущества комбинированного подхода, основанного на использовании UML Activity
	Diagrams для визуальной коммуникации и BPMN для формального описания процессов. 
	Обоснована необходимость разработки детализированных сценариев использования системы,
	обеспечивающих полное покрытие функциональных требований и способствующих эффективной 
	координации между разработчиками и заинтересованными сторонами.
\end{annotation}

\subsection{Актуальность семантического описания процессов}
В контексте разработки информационной системы валидации научных публикаций критически
важной является четкая формализация и документирование бизнес-процессов. Семантическое
описание процессов решает следующие задачи

\begin{itemize}
	\item \textbf{Требования к функциональности:} служит основой для формулирования и верификации функциональных требований к системе;
	\item \textbf{Архитектурное проектирование:} определяет структуру модулей, интеграционные точки и потоки данных;
	\item \textbf{Тестирование и валидация:} предоставляет сценарии для разработки тестовых случаев и проверки корректности реализации;
	\item \textbf{Документирование:} создает базис для подготовки пользовательской документации и руководств.
\end{itemize}

\subsection{Сравнительный анализ методов формализации процессов}
Для описания процесса валидации научной статьи рассмотрены следующие подходы (см. табл. 1.2):

\begin{table}[h]
	\caption{Сравнение методов формализации процессов}
	\label{tab:process-formalization-methods}
	\centering
	\begin{tabular}{|p{0.2\textwidth}|p{0.23\textwidth}|p{0.23\textwidth}|p{0.2\textwidth}|}
		\hline
		Метод & Применение & Наглядность & Формализм \\
		\hline
		IDEF0 & Функциональное моделирование & Средняя & Высокий \\
		\hline
		UML Activity Diagrams & Визуальное моделирование процессов & Высокая & Средний \\
		\hline
		BPMN (Business Process Model and Notation) & Бизнес-процессы, управление потоками & Очень высокая & Высокий \\
		\hline
		Текстовое описание & Неформальное описание процессов & Низкая & Низкий \\
		\hline
	\end{tabular}
\end{table}

Для системы валидации научных публикаций оптимальным является комбинированный подход:

\begin{compactenum}
	\item \textbf{UML Activity Diagrams} используются для визуализации основных процессов 
	и сценариев использования, обеспечивая ясное понимание потоков данных и взаимодействия
	компонентов системы;
	\item \textbf{BPMN} применяется для формального описания критических и сложных процессов,
	особенно при необходимости интеграции с внешними системами (CrossRef API, системы вузов);
	\item \textbf{Текстовое описание} используется для дополнительного описания процессов и сценариев использования,
	обеспечивая гибкость и универсальность при отсутствии необходимости визуального представления.
\end{compactenum}

\subsection{Ключевые сценарии использования системы}
На основе требований предметной области выделены следующие основные сценарии (use cases):



\subsection*{Сценарий 1: Валидация статьи по DOI/Arxiv} 
	\begin{compactenum}
			\item Пользователь предоставляет цифровой идентификатор (DOI) научной статьи;
			\item Система отправляет запрос к CrossRef API для получения метаданных публикации;
			\item Система извлекает следующие данные: ISSN журнала, дату публикации, авторов, название;
			\item Система выполняет поиск журнала в локальной БД по ISSN;
			\item Система проверяет принадлежность журнала к перечню ВАК на дату публикации;
			\item Система возвращает результат: подтверждение включения/исключения с соответствующими объяснениями.
	\end{compactenum}


\subsection*{Сценарий 2: Администратор загружает новую версию перечня}
	\begin{compactenum} 
			\item Администратор загружает PDF-файл актуальной версии перечня ВАК;
			\item Система выполняет автоматический парсинг перечня и извлекает список журналов;
			\item Система обновляет БД с новыми версиями, сохраняя исторические данные;
			\item Система логирует все изменения с датой и пользователем, выполнившим обновление.
	\end{compactenum}


\subsection*{Сценарий 3: Пользователь ищет журнал в перечне}
	\begin{compactenum}
			\item Пользователь предоставляет ISSN журнала;
			\item Система выполняет поиск в БД по текущей версии перечня;
			\item Система отображает результаты с указанием категории, кода специальности и статуса включения;
			\item Пользователь может просмотреть историю включения журнала в перечень (версионность).
	\end{compactenum}


\subsection{Выводы по разделу}
Проведенный анализ показал, что для эффективного описания процессов в системе валидации 
необходимо применять комбинированный подход, сочетающий достоинства различных методологий.
UML Activity Diagrams обеспечивают необходимую наглядность для коммуникации, 
BPMN предоставляет формальность для реализации, а детальные сценарии
использования служат мостом между концептуальным описанием и практической реализацией. 
Такой комплексный подход гарантирует, что все заинтересованные стороны имеют
единое понимание функциональности и требований системы, что существенно снижает риск
неправильной интерпретации требований и ошибок в реализации.


\section{Сравнительный анализ серверных технологий для веб-приложений}
\begin{annotation}
	В разделе представлен анализ современных серверных технологий и языков
	программирования, применимых для разработки backend-части системы. Рассмотрены критерии 
	выбора: универсальность языка, наличие библиотек для парсинга PDF, работа с
	внешними API, поддержка асинхронности и зрелость экосистемы. Проведён анализ выбора 
	языка программирования с акцентом на задачу парсинга и активной работы с БД. На
	основании анализа обоснован выбор языка Python благодаря широкому набору специализированных
	библиотек и зрелой инфраструктуре для построения REST API. Выбран фреймворк 
	FastAPI как оптимальный вариант для асинхронной и масштабируемой реализации
	сервиса,обеспечивающий автоматическую валидацию данных, генерацию документации и
	высокую производительность при I/O-bound задачах.
\end{annotation}

Для реализации серверной части системы валидации научных статей необходимо выбрать
адекватный язык программирования и веб-фреймворк. Выбор обусловлен спецификой задачи:
парсинг PDF, работа с внешними API, обработка структурированных данных,
асинхронная обработка запросов.

\subsection{Выбор языка программирования}

На основе анализа предметной области и архитектурных требований сформулированы
следующие критерии выбора языка:

\begin{itemize}
	\item \textbf{Универсальность и объектно-ориентированность:} возможность разработки как консольных утилит (парсеров), так и веб-сервисов;
	\item \textbf{Наличие библиотек для парсинга данных:} готовые решения для работы с PDF;
	\item \textbf{Качественные веб-фреймворки:} наличие проверенных и хорошо документированных фреймворков;
	\item \textbf{Экосистема и сообщество:} готовые решения, наличие обучающих материалов;
	\item \textbf{Производительность:} возможность асинхронной обработки I/O-bound задач (парсинг, API запросы, взаимодействие с БД);
	\item \textbf{Взаимодействие с ML, CV и OCR:} наличие удобных библиотек для работы с моделями машинного обучения, компьютерного зрения и оптического распознавания текста.
\end{itemize}

На основе требований предметной области и сформулированных критериев выбора 
языка программирования выбран язык Python.

\subsection{Обоснование выбора языка Python}

Python обладает множеством преимуществ, которые делают его идеальным выбором для разработки серверной части исследуемой предметной области:

\begin{compactenum}
	\item \textbf{Интеграция с CrossRef API:}
	\begin{itemize}
		\item Наличие готовых официальных библиотек для работы с CrossRef API (habanero, crossrefapi, crossref-commons);
		\item Примеры кода для работы с CrossRef API;
		\item Простая работа с JSON-объектами через стандартные структуры данных Python.
	\end{itemize}

	\item \textbf{Наличие мощных фреймворков для разработки веб-сервисов:}
		\begin{itemize}
			\item \textbf{FastAPI:} --- современный, асинхронный фреймворк для разработки RESTful API и микросервисов;
			\item \textbf{Django:} --- монолитный фреймворк со встроенными "батарейками" для построения больших проектов;
			\item \textbf{Flask:} --- микрофреймворк для быстрой разработки RESTful API.
		\end{itemize}

	\item \textbf{Развитая экосистема для парсинга данных:}
	    \begin{itemize}
			\item Наличие готовых библиотек для работы с PDF (PyPDF2, pdfminer.six, pdfplumber);
			\item Хорошо документированные библиотеки для парсинга сайтов (BeautifulSoup, Scrapy, Playwright);
			\item Готовые решения для парсинга данных по API (aiohttp, httpx, requests).
		\end{itemize}
	
	\item \textbf{Возможность параллельных вычислений:}
		\begin{itemize}
			\item Наличие встроенных средств для параллельных вычислений (asyncio, threading, multiprocessing);
			\item Возможность использования ASGI (асинхронный серверный шлюз) серверов (Uvicorn, Hypercorn);
			\item Библиотеки для использования WebSocket (socketio, websockets) обеспечивающих двунаправленную и непрерывную связь между клиентом и сервером.
			\item Библиотеки для использования GraphQL (graphene, strawberry) обеспечивающих гибкую и мощную систему запросов к данным.
		\end{itemize}

	\item \textbf{Тесное взаимодействие с ML, CV и OCR:}
	    \begin{itemize}
			\item Готовые библиотеки для работы, обучения и интеграции ML-моделей (TensorFlow, PyTorch, scikit-learn);
			\item Инструменты для работы с CV (OpenCV, Tesseractm Pillow, scikit-image);
			\item DataScience библиотеки для изучения и визуализации данных (pandas, numpy, scipy, matplotlib, seaborn);
		\end{itemize}
\end{compactenum}

\subsection{Выбор веб-фреймворка}

Одним из главных факторов выбора фреймворка для построения backend-части системы
является скорость разработки и масштабируемость продукта в будущем (возможность перехода
на микросервисную архитектуру, асинхронная обработка I/O-bound задач, возможность
подключения асинхронных брокеров сообщений для обработки фоновых задач и общения
между другими микросервисами).

\begin{table}[h]
	\caption{Сравнение веб-фреймворков}
	\label{tab:web-frameworks}
	\centering
	\begin{tabular}{|p{0.2\textwidth}|p{0.23\textwidth}|p{0.23\textwidth}|p{0.2\textwidth}|}
		\hline
		Фреймворк & Описание & Преимущества & Недостатки \\
		\hline
		FastAPI 
		& Быстрый и легкий в использовании для построения REST API & Быстрая разработка, валидация, типизация, ASGI, OpenAPI
	    & Не имеет готовых ”батареек” по типу админ-панели, работы с пользователями. \\
		\hline
		Django & Монолитный фреймворк для построения веб-приложений & Встроенная ORM, Django-Admin, User Management, встроенная система безопасности & Нет полной поддержки асинхронности. Нет типизации. Нет валидации данных из ”коробки”.\\
		\hline
		Flask & Микрофреймворк для быстрой разработки RESTful API & Быстрая разработка, легкое масштабирование, хорошая документация & Не подходит для построения сложных API и веб-приложений \\
		\hline
	\end{tabular}
\end{table}

Среди имеющихся в Python фреймворков для построения backend-сервиса (см. табл. \ref{tab:web-frameworks})
был выбран FastAPI, преимуществами которого являются:


\textbf{1. Асинхронность из "коробки"}:
Работа с запросами к API, взаимодействие с базой данных 
--- I/O-bound задачи (чтение/запись, не требующие процессорных вычислений), которые 
могут быть выполнены асинхронно без использования дополнительных библиотек, что позволяет 
повысить производительность сервиса при увеличении количества запросов:


\begin{minted}[fontsize=\small, frame=single, framesep=4mm]{python}
from fastapi import FastAPI, Depends
from typing import Annotated

app = FastAPI()

@app.post('/api/validate')
async def validate_article(
    article: Article, 
    doi_service: Annotated[DoiService, Depends(get_doi_service)],
    validation_service: Annotated[
        ValidationService, Depends(get_validation_service)
    ],
    logging_service: Annotated[
        LoggingService, Depends(get_logging_service)
    ]
) -> ResponseSchema:

    # async получение данных из API
    article_data = await doi_service.fetch_article_data(article)

    # async валидация данных
    validation_result = await validation_service.validate_article(
        article_data,
    )
    # async логирование результата в БД
    await logging_service.log_validation_result(
        validation_result
    )
    return validation_result
\end{minted}

\textbf{2. Автоматические валидация данных и генерации документации:}
FastAPI под капотом использует библиотеку Pydantic для автоматической валидации 
и преобразования данных (JSON $\leftrightarrow$ Python), что позволяет избежать многих ошибок
при обработке данных и обеспечивает высокую производительность за счет оптимизации 
работы с данными:

\begin{minted}[fontsize=\small, frame=lines, framesep=4mm]{python}
"""Пример автоматической валидации данных"""

from fastapi import FastAPI, Depends
from pydantic import BaseModel

class Article(BaseModel):
	"""Модель валидации статьи."""

    # Модель автоматически валидирует
    # поля исходя из их типа данных.
    title: str
    author: str

article = Article(
    title=1,
    author="John Doe",
)
# -> ValidationError: 1 is not a valid string
\end{minted}

К тому же, FastAPI автоматически генерирует документацию в формате OpenAPI,
где можно детально изучить все входные и выходные данные для каждой конечной точки API.

\textbf{3. Инъекция зависимостей:}
FastAPI, как нынче популярно в языке Java, активно использует паттерн проектирования Dependency Injection (DI),
с помощью которого можно легко управлять интерфейсами между компонентами системы, обеспечивая высокую модульность 
и тестируемость кода, благодаря внедрению DI-контейнеров:

\begin{minted}[fontsize=\small, frame=single, framesep=4mm]{python}
from typing import Annotated, ABC, abstractmethod

from fastapi import FastAPI, Depends

class AbstractValidationService(ABC):  # Абстрактный интерфейс
    @abstractmethod
    async def validate(self, article: Article) -> ValidationResult:
        pass  # Реализация в подклассах


class FirstValidationService(AbstractValidationService):
    async def validate(self, article: Article) -> ValidationResult:
        # Логика валидации статьи

class SecondValidationService(AbstractValidationService):
    async def validate(self, article: Article) -> ValidationResult:
        # Другая логика валидации статьи

def get_validation_service(
    service_type: Literal["first", "second"]
) -> AbstractValidationService:
    if service_type == "first":
        return FirstValidationService()
    elif service_type == "second":
        return SecondValidationService()
    else:
        raise ValueError(f"Invalid service type: {service_type}")

@app.post('/api/validate')
async def validate_article(
    article: Article,
    validation_service: Annotated[
        AbstractValidationService, 
        Depends(get_validation_service)  # DI-контейнер
    ],
) -> ValidationResult:
    return await validation_service.validate(article)
\end{minted}

			
	

%%% Local Variables:
%%% TeX-engine: xetex
%%% eval: (setq-local TeX-master (concat "../" (seq-find (-cut string-match ".*-3-pz\.tex$" <>) (directory-files ".."))))
%%% End:
